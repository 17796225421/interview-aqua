# 2，write 在阻塞和非阻塞下的区别。

- 阻塞下

​    当内核缓冲区大小不足以容纳需要写入的 nbytes，write一直阻塞等待，直到缓冲区大小 >= nbytes 时，write一次性copy，等待的过程中，有可能会被信号中断。

​    当内核缓冲区大小能够容纳需要写入的nbytes，write copy到缓冲区，并返回 nbytes。

- 非阻塞

​    坚持的原则是有多少写多少，如果内核缓冲区空间足够，同阻塞情况，一次性copy；如果缓冲区不够，则缓冲区的大小是有多少就写入多少，并返回该值，显然返回值小于nbytes，此种情况需要循环的方式将nbytes数据写到缓冲区；如果缓冲区是满的，则返回-1，并置error值为EAGAIN 或 EWOULDBLOCK。