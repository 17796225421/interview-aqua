#### [12、被free回收的内存是立即返还给操作系统吗？](https://interviewguide.cn/#/Doc/Knowledge/C++/基础语法/基础语法?id=12、被free回收的内存是立即返还给操作系统吗？)

不是的，被free回收的内存会首先被ptmalloc使用双链表保存起来，当用户下一次申请内存的时候，会尝试从这些内存中寻找合适的返回。这样就避免了频繁的系统调用，占用过多的系统资源。同时ptmalloc也会尝试对小块内存进行合并，避免过多的内存碎片。